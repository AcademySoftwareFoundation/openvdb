<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>OpenVDB: SRetFunction&lt; SignatureT, DerivedFunction &gt; Struct Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenVDB
   &#160;<span id="projectnumber">8.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceopenvdb.html">openvdb</a></li><li class="navelem"><a class="el" href="namespaceopenvdb_1_1v8__1.html">v8_1</a></li><li class="navelem"><a class="el" href="namespaceopenvdb_1_1v8__1_1_1ax.html">ax</a></li><li class="navelem"><a class="el" href="namespaceopenvdb_1_1v8__1_1_1ax_1_1codegen.html">codegen</a></li><li class="navelem"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1SRetFunction.html">SRetFunction</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1SRetFunction-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">SRetFunction&lt; SignatureT, DerivedFunction &gt; Struct Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Templated interface class for SRET functions. This struct provides the interface for functions that wish to return arrays (vectors or matrices) by internally remapping the first argument for the user. As far as LLVM and any bindings are concerned, the function signature remains unchanged - however the first argument becomes "invisible" to the user and is instead allocated by LLVM before the function is executed. Importantly, the argument has no impact on the user facing AX signature and doesn't affect declaration selection.  
 <a href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1SRetFunction.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="FunctionTypes_8h_source.html">FunctionTypes.h</a>&gt;</code></p>

<p>Inherits DerivedFunction.</p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a1f0369aa802ea699423de0552c44a42b"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1SRetFunction.html#a1f0369aa802ea699423de0552c44a42b">Ptr</a> = std::shared_ptr&lt; <a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1SRetFunction.html">SRetFunction</a>&lt; SignatureT, DerivedFunction &gt;&gt;</td></tr>
<tr class="separator:a1f0369aa802ea699423de0552c44a42b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2846ade648824cd69bd0fdc3d2cee4ca"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1SRetFunction.html#a2846ade648824cd69bd0fdc3d2cee4ca">Traits</a> = <a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1FunctionTraits.html">FunctionTraits</a>&lt; SignatureT &gt;</td></tr>
<tr class="separator:a2846ade648824cd69bd0fdc3d2cee4ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae3478e56d6f1d7325e335df6cd51d951"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1Function.html#aee8c90b86fef2410c5903bcdd9df708c">Function::SignatureMatch</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1SRetFunction.html#ae3478e56d6f1d7325e335df6cd51d951">match</a> (const std::vector&lt; llvm::Type * &gt; &amp;args, llvm::LLVMContext &amp;C) const  override</td></tr>
<tr class="memdesc:ae3478e56d6f1d7325e335df6cd51d951"><td class="mdescLeft">&#160;</td><td class="mdescRight">Override of match which inserts the SRET type such that the base class methods ignore it.  <a href="#ae3478e56d6f1d7325e335df6cd51d951">More...</a><br /></td></tr>
<tr class="separator:ae3478e56d6f1d7325e335df6cd51d951"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53beecbf86146a2e18686add3c227c3e"><td class="memItemLeft" align="right" valign="top">llvm::Value *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1SRetFunction.html#a53beecbf86146a2e18686add3c227c3e">call</a> (const std::vector&lt; llvm::Value * &gt; &amp;args, llvm::IRBuilder&lt;&gt; &amp;B, const bool cast) const  override</td></tr>
<tr class="memdesc:a53beecbf86146a2e18686add3c227c3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Override of call which allocates the required SRET llvm::Value for this function.  <a href="#a53beecbf86146a2e18686add3c227c3e">More...</a><br /></td></tr>
<tr class="separator:a53beecbf86146a2e18686add3c227c3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47ee0943e6ecb389b72cda657aaaeced"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1SRetFunction.html#a47ee0943e6ecb389b72cda657aaaeced">print</a> (llvm::LLVMContext &amp;C, std::ostream &amp;os, const char *name=nullptr, const bool axTypes=true) const  override</td></tr>
<tr class="memdesc:a47ee0943e6ecb389b72cda657aaaeced"><td class="mdescLeft">&#160;</td><td class="mdescRight">Override of print to avoid printing out the SRET type.  <a href="#a47ee0943e6ecb389b72cda657aaaeced">More...</a><br /></td></tr>
<tr class="separator:a47ee0943e6ecb389b72cda657aaaeced"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a0c338f0966041dc5fd031714ffac5bd5"><td class="memTemplParams" colspan="2">template&lt;typename... Args&gt; </td></tr>
<tr class="memitem:a0c338f0966041dc5fd031714ffac5bd5"><td class="memTemplItemLeft" align="right" valign="top">&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1SRetFunction.html#a0c338f0966041dc5fd031714ffac5bd5">SRetFunction</a> (Args &amp;&amp;...ts)</td></tr>
<tr class="memdesc:a0c338f0966041dc5fd031714ffac5bd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Forward all arguments to the derived class.  <a href="#a0c338f0966041dc5fd031714ffac5bd5">More...</a><br /></td></tr>
<tr class="separator:a0c338f0966041dc5fd031714ffac5bd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename SignatureT, typename DerivedFunction&gt;<br />
struct openvdb::v8_1::ax::codegen::SRetFunction&lt; SignatureT, DerivedFunction &gt;</h3>

<p>Templated interface class for SRET functions. This struct provides the interface for functions that wish to return arrays (vectors or matrices) by internally remapping the first argument for the user. As far as LLVM and any bindings are concerned, the function signature remains unchanged - however the first argument becomes "invisible" to the user and is instead allocated by LLVM before the function is executed. Importantly, the argument has no impact on the user facing AX signature and doesn't affect declaration selection. </p>
<dl class="section note"><dt>Note</dt><dd>This class is not intended to be instantiated directly, but instead used by derived implementation which hold a valid implementations of member functions required to create a llvm::Function (such as <a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1Function.html#ad2e75a6e74e69d1563a9d41d626b30a0" title="Populate a vector of llvm::Types which describe this function signature. This method is used by Funct...">Function::types</a> and <a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1Function.html#a756495c036ac3d363d304fa97fe9fb7a" title="Uses the IRBuilder to create a call to this function with the given arguments, creating the function ...">Function::call</a>). This exists as an interface to avoid virtual inheritance. </dd></dl>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="a1f0369aa802ea699423de0552c44a42b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1SRetFunction.html#a1f0369aa802ea699423de0552c44a42b">Ptr</a> =  std::shared_ptr&lt;<a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1SRetFunction.html">SRetFunction</a>&lt;SignatureT, DerivedFunction&gt;&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a2846ade648824cd69bd0fdc3d2cee4ca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1SRetFunction.html#a2846ade648824cd69bd0fdc3d2cee4ca">Traits</a> =  <a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1FunctionTraits.html">FunctionTraits</a>&lt;SignatureT&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a0c338f0966041dc5fd031714ffac5bd5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1SRetFunction.html">SRetFunction</a> </td>
          <td>(</td>
          <td class="paramtype">Args &amp;&amp;...&#160;</td>
          <td class="paramname"><em>ts</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Forward all arguments to the derived class. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a53beecbf86146a2e18686add3c227c3e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">llvm::Value* call </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; llvm::Value * &gt; &amp;&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">llvm::IRBuilder&lt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>cast</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Override of call which allocates the required SRET llvm::Value for this function. </p>
<dl class="section note"><dt>Note</dt><dd>Unlike other function where the returned llvm::Value* is a llvm::CallInst (which also represents the return value), SRET functions return the allocated 1st argument i.e. not a llvm::CallInst </dd></dl>

</div>
</div>
<a class="anchor" id="ae3478e56d6f1d7325e335df6cd51d951"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1Function.html#aee8c90b86fef2410c5903bcdd9df708c">Function::SignatureMatch</a> match </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; llvm::Type * &gt; &amp;&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">llvm::LLVMContext &amp;&#160;</td>
          <td class="paramname"><em>C</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Override of match which inserts the SRET type such that the base class methods ignore it. </p>

</div>
</div>
<a class="anchor" id="a47ee0943e6ecb389b72cda657aaaeced"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void print </td>
          <td>(</td>
          <td class="paramtype">llvm::LLVMContext &amp;&#160;</td>
          <td class="paramname"><em>C</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>os</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>axTypes</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Override of print to avoid printing out the SRET type. </p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="FunctionTypes_8h_source.html">FunctionTypes.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
