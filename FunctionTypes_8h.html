<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>OpenVDB: FunctionTypes.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenVDB
   &#160;<span id="projectnumber">8.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_6b5a99191d79160345fea4068dd59b89.html">openvdb_ax</a></li><li class="navelem"><a class="el" href="dir_cae5b229f742550e00edd472eaaf99f1.html">openvdb_ax</a></li><li class="navelem"><a class="el" href="dir_de747e3eb4c4c2c23b38546883fd0233.html">codegen</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#namespaces">Namespaces</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">FunctionTypes.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Contains frameworks for creating custom AX functions which can be registered within the FunctionRegistry and used during code generation. The intended and safest way to build a function is to use the FunctionBuilder struct with its addSignature methods. Note that the derived Function classes provided can also be subclassed for more granular control, however may be subject to more substantial API changes.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="ax_2openvdb__ax_2codegen_2Types_8h_source.html">Types.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="openvdb__ax_2openvdb__ax_2codegen_2Utils_8h_source.html">Utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ConstantFolding_8h_source.html">ConstantFolding.h</a>&quot;</code><br />
<code>#include &lt;openvdb/version.h&gt;</code><br />
<code>#include &lt;llvm/IR/Constants.h&gt;</code><br />
<code>#include &lt;llvm/IR/IRBuilder.h&gt;</code><br />
<code>#include &lt;llvm/IR/Module.h&gt;</code><br />
<code>#include &lt;algorithm&gt;</code><br />
<code>#include &lt;functional&gt;</code><br />
<code>#include &lt;memory&gt;</code><br />
<code>#include &lt;stack&gt;</code><br />
<code>#include &lt;type_traits&gt;</code><br />
<code>#include &lt;unordered_map&gt;</code><br />
<code>#include &lt;vector&gt;</code><br />
</div>
<p><a href="FunctionTypes_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1ArgType.html">ArgType&lt; T, _SIZE &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Object to array conversion methods to allow functions to return vector types. These containers provided an interface for automatic conversion of C++ objects to LLVM types as array types.  <a href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1ArgType.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1LLVMType_3_01ArgType_3_01T_00_01S_01_4_01_4.html">LLVMType&lt; ArgType&lt; T, S &gt; &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1TypeToSymbol.html">TypeToSymbol&lt; T &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type to symbol conversions - these characters are used to build each functions unique signature. They differ from standard AX or LLVM syntax to be as short as possible i.e. vec4d, [4 x double] = d4.  <a href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1TypeToSymbol.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1TypeToSymbol_3_01void_01_4.html">TypeToSymbol&lt; void &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1TypeToSymbol_3_01char_01_4.html">TypeToSymbol&lt; char &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1TypeToSymbol_3_01int16__t_01_4.html">TypeToSymbol&lt; int16_t &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1TypeToSymbol_3_01int32__t_01_4.html">TypeToSymbol&lt; int32_t &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1TypeToSymbol_3_01int64__t_01_4.html">TypeToSymbol&lt; int64_t &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1TypeToSymbol_3_01float_01_4.html">TypeToSymbol&lt; float &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1TypeToSymbol_3_01double_01_4.html">TypeToSymbol&lt; double &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1TypeToSymbol_3_01codegen_1_1String_01_4.html">TypeToSymbol&lt; codegen::String &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1TypeToSymbol_3_01T_01_5_01_4.html">TypeToSymbol&lt; T * &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1TypeToSymbol_3_01T[S]_4.html">TypeToSymbol&lt; T[S]&gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1TypeToSymbol_3_01ArgType_3_01T_00_01S_01_4_01_4.html">TypeToSymbol&lt; ArgType&lt; T, S &gt; &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1TypeToSymbol_3_01math_1_1Vec2_3_01T_01_4_01_4.html">TypeToSymbol&lt; math::Vec2&lt; T &gt; &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1TypeToSymbol_3_01math_1_1Vec3_3_01T_01_4_01_4.html">TypeToSymbol&lt; math::Vec3&lt; T &gt; &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1TypeToSymbol_3_01math_1_1Vec4_3_01T_01_4_01_4.html">TypeToSymbol&lt; math::Vec4&lt; T &gt; &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1TypeToSymbol_3_01math_1_1Mat3_3_01T_01_4_01_4.html">TypeToSymbol&lt; math::Mat3&lt; T &gt; &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1TypeToSymbol_3_01math_1_1Mat4_3_01T_01_4_01_4.html">TypeToSymbol&lt; math::Mat4&lt; T &gt; &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1TypeToSymbol_3_01const_01T_01_4.html">TypeToSymbol&lt; const T &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1TypeToSymbol_3_01const_01T_01_5_01_4.html">TypeToSymbol&lt; const T * &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1ArgumentIterator.html">ArgumentIterator&lt; SignatureT, I &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Templated argument iterator which implements various small functions per argument type, resolved at compile time.  <a href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1ArgumentIterator.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1ArgumentIterator_3_01SignatureT_00_010_01_4.html">ArgumentIterator&lt; SignatureT, 0 &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1Function.html">Function</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The base/abstract representation of an AX function. Derived classes must implement the <a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1Function.html#ad2e75a6e74e69d1563a9d41d626b30a0" title="Populate a vector of llvm::Types which describe this function signature. This method is used by Funct...">Function::types</a> call to describe their signature.  <a href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1Function.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1SRetFunction.html">SRetFunction&lt; SignatureT, DerivedFunction &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Templated interface class for SRET functions. This struct provides the interface for functions that wish to return arrays (vectors or matrices) by internally remapping the first argument for the user. As far as LLVM and any bindings are concerned, the function signature remains unchanged - however the first argument becomes "invisible" to the user and is instead allocated by LLVM before the function is executed. Importantly, the argument has no impact on the user facing AX signature and doesn't affect declaration selection.  <a href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1SRetFunction.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1CFunctionBase.html">CFunctionBase</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The base class for all C bindings.  <a href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1CFunctionBase.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1CFunction.html">CFunction&lt; SignatureT &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents a concrete C function binding.  <a href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1CFunction.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1IRFunctionBase.html">IRFunctionBase</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The base/abstract definition for an IR function.  <a href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1IRFunctionBase.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1IRFunction.html">IRFunction&lt; SignatureT &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents a concrete IR function.  <a href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1IRFunction.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1CFunctionSRet.html">CFunctionSRet&lt; SignatureT &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents a concrete C function binding with the first argument as its return type.  <a href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1CFunctionSRet.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1IRFunctionSRet.html">IRFunctionSRet&lt; SignatureT &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents a concrete IR function with the first argument as its return type.  <a href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1IRFunctionSRet.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1FunctionGroup.html">FunctionGroup</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">todo  <a href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1FunctionGroup.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1FunctionBuilder.html">FunctionBuilder</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1FunctionBuilder.html" title="The FunctionBuilder class provides a builder pattern framework to allow easy and valid construction o...">FunctionBuilder</a> class provides a builder pattern framework to allow easy and valid construction of AX functions. There are a number of complex tasks which may need to be performed during construction of C or IR function which are delegated to this builder, whilst ensuring that the constructed functions are guaranteed to be valid.  <a href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1FunctionBuilder.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v8__1_1_1ax_1_1codegen_1_1FunctionBuilder_1_1Settings.html">FunctionBuilder::Settings</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespaceopenvdb"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceopenvdb.html">openvdb</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespaceopenvdb_1_1v8__1"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceopenvdb_1_1v8__1.html">openvdb::v8_1</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespaceopenvdb_1_1v8__1_1_1ax"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceopenvdb_1_1v8__1_1_1ax.html">openvdb::v8_1::ax</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespaceopenvdb_1_1v8__1_1_1ax_1_1codegen"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceopenvdb_1_1v8__1_1_1ax_1_1codegen.html">openvdb::v8_1::ax::codegen</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a19491c62dae10fc5b97850b29231b0ef"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceopenvdb_1_1v8__1_1_1ax_1_1codegen.html#a19491c62dae10fc5b97850b29231b0ef">V2D</a> = ArgType&lt; double, 2 &gt;</td></tr>
<tr class="separator:a19491c62dae10fc5b97850b29231b0ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf19fc2ebfc31df1b136083c7051c524"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceopenvdb_1_1v8__1_1_1ax_1_1codegen.html#adf19fc2ebfc31df1b136083c7051c524">V2F</a> = ArgType&lt; float, 2 &gt;</td></tr>
<tr class="separator:adf19fc2ebfc31df1b136083c7051c524"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac39e79e84de78fa6188c1b812ef7c9c0"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceopenvdb_1_1v8__1_1_1ax_1_1codegen.html#ac39e79e84de78fa6188c1b812ef7c9c0">V2I</a> = ArgType&lt; int32_t, 2 &gt;</td></tr>
<tr class="separator:ac39e79e84de78fa6188c1b812ef7c9c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe076b1a292d8635a2e144ecb285be2c"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceopenvdb_1_1v8__1_1_1ax_1_1codegen.html#afe076b1a292d8635a2e144ecb285be2c">V3D</a> = ArgType&lt; double, 3 &gt;</td></tr>
<tr class="separator:afe076b1a292d8635a2e144ecb285be2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a93313e37930c7ec565dc4f3eb36fd6"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceopenvdb_1_1v8__1_1_1ax_1_1codegen.html#a3a93313e37930c7ec565dc4f3eb36fd6">V3F</a> = ArgType&lt; float, 3 &gt;</td></tr>
<tr class="separator:a3a93313e37930c7ec565dc4f3eb36fd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b46918e9d7dca7ca333e39d3a80f525"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceopenvdb_1_1v8__1_1_1ax_1_1codegen.html#a7b46918e9d7dca7ca333e39d3a80f525">V3I</a> = ArgType&lt; int32_t, 3 &gt;</td></tr>
<tr class="separator:a7b46918e9d7dca7ca333e39d3a80f525"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96a5962a96d7ca3f39ad565d8fffd335"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceopenvdb_1_1v8__1_1_1ax_1_1codegen.html#a96a5962a96d7ca3f39ad565d8fffd335">V4D</a> = ArgType&lt; double, 4 &gt;</td></tr>
<tr class="separator:a96a5962a96d7ca3f39ad565d8fffd335"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5289743e2fa6d363751795a25ec6dd19"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceopenvdb_1_1v8__1_1_1ax_1_1codegen.html#a5289743e2fa6d363751795a25ec6dd19">V4F</a> = ArgType&lt; float, 4 &gt;</td></tr>
<tr class="separator:a5289743e2fa6d363751795a25ec6dd19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1da87a694970da5888f4db38a93c2ffb"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceopenvdb_1_1v8__1_1_1ax_1_1codegen.html#a1da87a694970da5888f4db38a93c2ffb">V4I</a> = ArgType&lt; int32_t, 4 &gt;</td></tr>
<tr class="separator:a1da87a694970da5888f4db38a93c2ffb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b2463f1262305b6a40aface8a10d5ff"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceopenvdb_1_1v8__1_1_1ax_1_1codegen.html#a4b2463f1262305b6a40aface8a10d5ff">M3D</a> = ArgType&lt; double, 9 &gt;</td></tr>
<tr class="separator:a4b2463f1262305b6a40aface8a10d5ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa54db21251983c9e341b3da7635e9766"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceopenvdb_1_1v8__1_1_1ax_1_1codegen.html#aa54db21251983c9e341b3da7635e9766">M3F</a> = ArgType&lt; float, 9 &gt;</td></tr>
<tr class="separator:aa54db21251983c9e341b3da7635e9766"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50d45a6bbe207f32a91d91d9a3f545bb"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceopenvdb_1_1v8__1_1_1ax_1_1codegen.html#a50d45a6bbe207f32a91d91d9a3f545bb">M4D</a> = ArgType&lt; double, 16 &gt;</td></tr>
<tr class="separator:a50d45a6bbe207f32a91d91d9a3f545bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a013d7b6412643a11b959eb75b974ef6c"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceopenvdb_1_1v8__1_1_1ax_1_1codegen.html#a013d7b6412643a11b959eb75b974ef6c">M4F</a> = ArgType&lt; float, 16 &gt;</td></tr>
<tr class="separator:a013d7b6412643a11b959eb75b974ef6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab307e63c31aca5ca8234b48ab97dba6a"><td class="memTemplParams" colspan="2">template&lt;typename SignatureT &gt; </td></tr>
<tr class="memitem:ab307e63c31aca5ca8234b48ab97dba6a"><td class="memTemplItemLeft" align="right" valign="top">llvm::Type *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespaceopenvdb_1_1v8__1_1_1ax_1_1codegen.html#ab307e63c31aca5ca8234b48ab97dba6a">llvmTypesFromSignature</a> (llvm::LLVMContext &amp;C, std::vector&lt; llvm::Type * &gt; *types=nullptr)</td></tr>
<tr class="memdesc:ab307e63c31aca5ca8234b48ab97dba6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Populate a vector of llvm types from a function signature declaration.  <a href="namespaceopenvdb_1_1v8__1_1_1ax_1_1codegen.html#ab307e63c31aca5ca8234b48ab97dba6a">More...</a><br /></td></tr>
<tr class="separator:ab307e63c31aca5ca8234b48ab97dba6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19532ab913a04f4b87f13222b7d0267b"><td class="memTemplParams" colspan="2">template&lt;typename SignatureT &gt; </td></tr>
<tr class="memitem:a19532ab913a04f4b87f13222b7d0267b"><td class="memTemplItemLeft" align="right" valign="top">llvm::FunctionType *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespaceopenvdb_1_1v8__1_1_1ax_1_1codegen.html#a19532ab913a04f4b87f13222b7d0267b">llvmFunctionTypeFromSignature</a> (llvm::LLVMContext &amp;C)</td></tr>
<tr class="memdesc:a19532ab913a04f4b87f13222b7d0267b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate an LLVM FunctionType from a function signature.  <a href="namespaceopenvdb_1_1v8__1_1_1ax_1_1codegen.html#a19532ab913a04f4b87f13222b7d0267b">More...</a><br /></td></tr>
<tr class="separator:a19532ab913a04f4b87f13222b7d0267b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd914562ed48960251bfe636ebe62045"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceopenvdb_1_1v8__1_1_1ax_1_1codegen.html#afd914562ed48960251bfe636ebe62045">printSignature</a> (std::ostream &amp;os, const std::vector&lt; llvm::Type * &gt; &amp;types, const llvm::Type *returnType, const char *name=nullptr, const std::vector&lt; const char * &gt; &amp;names={}, const bool axTypes=false)</td></tr>
<tr class="memdesc:afd914562ed48960251bfe636ebe62045"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print a function signature to the provided ostream.  <a href="namespaceopenvdb_1_1v8__1_1_1ax_1_1codegen.html#afd914562ed48960251bfe636ebe62045">More...</a><br /></td></tr>
<tr class="separator:afd914562ed48960251bfe636ebe62045"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Contains frameworks for creating custom AX functions which can be registered within the FunctionRegistry and used during code generation. The intended and safest way to build a function is to use the FunctionBuilder struct with its addSignature methods. Note that the derived Function classes provided can also be subclassed for more granular control, however may be subject to more substantial API changes. </p>
<dl class="section author"><dt>Authors</dt><dd>Nick Avramoussis</dd></dl>
<p>There are a variety of different ways to build a function which are tailored towards different function types. The two currently supported function implementations are C Bindings and IR generation. Additionally, depending on the return type of the function, you may need to declare your function an SRET (structural return) function.</p>
<p>C Bindings: As the name suggests, the CFunction class infrastructure provides the quickest and easiest way to bind to methods in your host application. The most important thing to consider when choosing this approach is performance. LLVM will have no knowledge of the function body during optimization passes. Depending on the implementation of your method and the user's usage from AX, C bindings may be subject to limited optimizations in comparison to IR functions. For example, a static function which is called from within a loop cannot be unrolled. See the CFunction templated class.</p>
<p>IR Functions: IR Functions expect implementations to generate the body of the function directly into IR during code generation. This ensures optimal performance during optimization passes however can be trickier to design. Note that, in the future, AX functions will be internally supported to provide a better solution for IR generated functions. See the IRFunction templated class.</p>
<p>SRET Functions: Both C Bindings and IR Functions can be marked as SRET methods. SRET methods, in AX, are any function which returns a value which is not a scalar (e.g. vectors, matrices). This follows the same optimization logic as clang which will rebuild function signatures with their return type as the first argument if the return type is greater than a given size. You should never attempt to return alloca's directly from functions (unless malloced).</p>
<p>Some other things to consider:</p><ul>
<li>Ensure C Binding dependencies have been correctly mapped.</li>
<li>Avoid calling B.CreateAlloca inside of IR functions - instead rely on the utility method <a class="el" href="namespaceopenvdb_1_1v8__1_1_1ax_1_1codegen.html#a97bd9110876e44d0f62539c0015fb23b" title="Insert a stack allocation at the beginning of the current function of the provided type and size...">insertStaticAlloca()</a> where possible.</li>
<li>Ensure both floating point and integer argument signatures are provided if you wish to avoid floats truncating.</li>
<li>Array arguments (vectors/matrices) are always passed by pointer. Scalar arguments are always passed by copy.</li>
<li>Ensure array arguments which will not be modified are marked as readonly. Currently, only array arguments can be passed by "reference".</li>
<li>Ensure function bodies, return types and parameters and marked with desirable llvm attributes. </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
